(()=>{"use strict";var t={858:(t,e,n)=>{t.exports=n.p+"c70a5d0c33a11d351f70.wasm"}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.m=t,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var o=e.getElementsByTagName("script");o.length&&(t=o[o.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,(()=>{let t;const e=new Array(32).fill(void 0);e.push(void 0,null,!0,!1);let o=e.length;function r(t){o===e.length&&e.push(e.length+1);const n=o;return o=e[n],e[n]=t,n}function i(t){return e[t]}function s(t){const n=i(t);return function(t){t<36||(e[t]=o,o=t)}(t),n}const a=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});a.decode();let c=new Uint8Array;Object.freeze({DEAD:0,0:"DEAD",ALIVE:1,1:"ALIVE"});class u{static __wrap(t){const e=Object.create(u.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const e=this.__destroy_into_raw();t.__wbg_board_free(e)}constructor(e,n){const o=t.board_new(e,n);return u.__wrap(o)}get_board_length(){return t.board_get_board_length(this.ptr)>>>0}set_cells(){t.board_set_cells(this.ptr)}get cells(){return s(t.board_cells(this.ptr))}get_cell_position_by_index(e){const n=t.board_get_cell_position_by_index(this.ptr,e);return l.__wrap(n)}get_cell_index_by_position(e){!function(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`);t.ptr}(e,l);var n=e.ptr;return e.ptr=0,t.board_get_cell_index_by_position(this.ptr,n)>>>0}get_neighbours_count(e){return t.board_get_neighbours_count(this.ptr,e)>>>0}toggle_cells(){t.board_toggle_cells(this.ptr)}}class l{static __wrap(t){const e=Object.create(l.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const e=this.__destroy_into_raw();t.__wbg_coordinates_free(e)}static new(e,n){const o=t.coordinates_new(e,n);return l.__wrap(o)}}function h(){const e={wbg:{}};return e.wbg.__wbindgen_memory=function(){return r(t.memory)},e.wbg.__wbg_buffer_3f3d764d4747d564=function(t){return r(i(t).buffer)},e.wbg.__wbg_newwithbyteoffsetandlength_d9aa266703cb98be=function(t,e,n){return r(new Uint8Array(i(t),e>>>0,n>>>0))},e.wbg.__wbindgen_object_drop_ref=function(t){s(t)},e.wbg.__wbg_new_8c3f0052272a457a=function(t){return r(new Uint8Array(i(t)))},e.wbg.__wbindgen_throw=function(e,n){throw new Error((o=e,r=n,a.decode((0===c.byteLength&&(c=new Uint8Array(t.memory.buffer)),c).subarray(o,o+r))));var o,r},e}async function _(e){void 0===e&&(e=new URL(n(858),n.b));const o=h();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:i}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await e,o);return function(e,n){return t=e.exports,_.__wbindgen_wasm_module=n,c=new Uint8Array,t}(r,i)}const f=_;function d(t,e,n){const o=t.createShader(e);return o?(t.shaderSource(o,n),t.compileShader(o),function(t,e){return t.getShaderParameter(e,WebGL2RenderingContext.COMPILE_STATUS)}(t,o)?o:(console.error(t.getShaderInfoLog(o)),t.deleteShader(o),null)):null}const g=function(t,e,n){return{vertexShader:d(t,WebGL2RenderingContext.VERTEX_SHADER,e),fragmentShader:d(t,WebGL2RenderingContext.FRAGMENT_SHADER,n)}},p=function(t,e,n){const o=t.createProgram();return o?(t.attachShader(o,e),t.attachShader(o,n),t.linkProgram(o),function(t,e){return t.getProgramParameter(e,WebGL2RenderingContext.LINK_STATUS)}(t,o)?o:(console.error(t.getProgramInfoLog(o)),t.deleteProgram(o),null)):null},m=function(t,e){const n=t.createBuffer();return n?(t.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,n),t.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,e,WebGL2RenderingContext.STATIC_DRAW),n):null},b=[[1,0,0,1],[0,0,0,1]];class w{constructor(t){this.resolution=[0,0],this.dimension=[0,0],this.verticesCount=0,this.vertexSize=1,this.context=null,this.shaders=[null,null],this.program=null,this.setCanvas(t),this.setContext(),this.context&&(this.setResolution(),this.setDimension(),this.setVerticesCount(),this.resize(),this.setShaders(),this.setProgram(),this.setUniforms())}setCanvas(t){this.canvas=document.getElementById(t)}setResolution(){const t=this.canvas.getBoundingClientRect(),{height:e,width:n}=t;this.resolution=[Math.ceil(n/50),Math.ceil(e/50)]}setDimension(){this.dimension=[50*this.resolution[0],50*this.resolution[1]]}setVerticesCount(){this.verticesCount=this.resolution[0]*this.resolution[1]}setContext(){this.context=this.canvas.getContext("webgl2")}resize(){var t;this.canvas.width=this.dimension[0],this.canvas.height=this.dimension[1],null===(t=this.context)||void 0===t||t.viewport(0,0,this.dimension[0],this.dimension[1])}setShaders(){if(this.context){const{vertexShader:t,fragmentShader:e}=g(this.context,"#version 300 es\n  precision highp float;\n\n  uniform vec2 u_dimension;\n  uniform vec2 u_resolution;\n  uniform float u_pointSize;\n  uniform vec4 u_color1;\n  uniform vec4 u_color2;\n\n  in float a_state;\n\n  out float state;\n  out vec4 color1;\n  out vec4 color2;\n    \n  void main() {\n    float index = float(gl_VertexID);\n  \n    vec2 position = vec2(\n      mod(index, u_resolution[0]), \n      u_resolution[1] - 1.0 - floor(index / u_resolution[0])\n    ) * u_pointSize + u_pointSize / 2.0;\n\n    vec2 zeroToOne = position / u_dimension;\n    vec2 zeroToTwo = zeroToOne * 2.0;\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace, 0, 1);\n    gl_PointSize = u_pointSize;\n\n    state = a_state;\n    color1 = u_color1;\n    color2 = u_color2;\n  }\n","#version 300 es\n  precision mediump float;\n \n  in float state;\n  in vec4 color1;\n  in vec4 color2;\n\n  out vec4 FragColor;\n\n  void main() {\n    FragColor = state == 1.0\n      ? color1\n      : color2;\n  }\n");this.shaders=[t,e]}}setProgram(){this.context&&this.shaders[0]&&this.shaders[1]&&(this.program=p(this.context,this.shaders[0],this.shaders[1]))}setUniforms(){if(this.context&&this.program){const t=this.context.getUniformLocation(this.program,"u_dimension"),e=this.context.getUniformLocation(this.program,"u_resolution"),n=this.context.getUniformLocation(this.program,"u_pointSize"),o=this.context.getUniformLocation(this.program,"u_color1"),r=this.context.getUniformLocation(this.program,"u_color2");this.context.useProgram(this.program),this.context.uniform2fv(t,this.dimension),this.context.uniform2fv(e,this.resolution),this.context.uniform1f(n,50),this.context.uniform4fv(o,b[0]),this.context.uniform4fv(r,b[1])}}draw(t){if(this.context&&this.program){this.context.clear(WebGL2RenderingContext.COLOR_BUFFER_BIT),m(this.context,t);const e=this.context.getAttribLocation(this.program,"a_state");this.context.enableVertexAttribArray(e),this.context.vertexAttribPointer(e,this.vertexSize,this.context.FLOAT,!1,0,0),this.context.drawArrays(this.context.POINTS,0,this.verticesCount/this.vertexSize)}}}window.addEventListener("DOMContentLoaded",(()=>{f().then((()=>{const t=new w("scene"),e=new u(t.resolution[1],t.resolution[0]);t.draw(new Float32Array(e.cells));let n=0;const o=()=>{n%100==0&&(n>0&&e.toggle_cells(),t.draw(new Float32Array(e.cells))),n=requestAnimationFrame(o)};requestAnimationFrame(o)}))}))})()})();